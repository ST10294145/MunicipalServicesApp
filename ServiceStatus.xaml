<Window x:Class="MunicipalServicesApp.ServiceStatus"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Service Request Status"
        Height="700" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#f0f4f8">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Service Request Status Tracker"
                   FontSize="28"
                   FontWeight="Bold"
                   Foreground="#2c3e50"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,20"/>

        <!-- Search and Filter Panel -->
        <Border Grid.Row="1" 
                Background="White" 
                CornerRadius="8" 
                Padding="15" 
                Margin="0,0,0,15"
                BorderBrush="#ddd" 
                BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Search by ID -->
                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Search by Request ID:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtSearchID" 
                             Height="30" 
                             VerticalContentAlignment="Center"
                             FontSize="14"/>
                </StackPanel>

                <!-- Filter by Status -->
                <StackPanel Grid.Column="1" Margin="0,0,10,0">
                    <TextBlock Text="Filter by Status:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox x:Name="cmbStatusFilter" 
                              Height="30" 
                              FontSize="14"
                              SelectionChanged="cmbStatusFilter_SelectionChanged">
                        <ComboBoxItem Content="All Statuses" IsSelected="True"/>
                        <ComboBoxItem Content="Pending"/>
                        <ComboBoxItem Content="In Progress"/>
                        <ComboBoxItem Content="Resolved"/>
                        <ComboBoxItem Content="Closed"/>
                    </ComboBox>
                </StackPanel>

                <!-- Filter by Priority -->
                <StackPanel Grid.Column="2" Margin="0,0,10,0">
                    <TextBlock Text="Filter by Priority:" FontWeight="SemiBold" Margin="0,0,0,5"/>
                    <ComboBox x:Name="cmbPriorityFilter" 
                              Height="30" 
                              FontSize="14"
                              SelectionChanged="cmbPriorityFilter_SelectionChanged">
                        <ComboBoxItem Content="All Priorities" IsSelected="True"/>
                        <ComboBoxItem Content="Critical"/>
                        <ComboBoxItem Content="High"/>
                        <ComboBoxItem Content="Medium"/>
                        <ComboBoxItem Content="Low"/>
                    </ComboBox>
                </StackPanel>

                <!-- Search Button -->
                <Button Grid.Column="3" 
                        x:Name="btnSearch"
                        Content="🔍 Search"
                        Width="100"
                        Height="30"
                        Background="#3498db"
                        Foreground="White"
                        FontWeight="Bold"
                        VerticalAlignment="Bottom"
                        Click="btnSearch_Click"/>
            </Grid>
        </Border>

        <!-- Main Content Area with Tabs -->
        <TabControl Grid.Row="2" Background="White" BorderBrush="#ddd">
            <!-- Tab 1: Service Requests List -->
            <TabItem Header="📋 All Requests" FontSize="14" FontWeight="SemiBold">
                <Grid Margin="10">
                    <DataGrid x:Name="dgServiceRequests"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              SelectionMode="Single"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              HeadersVisibility="Column"
                              GridLinesVisibility="Horizontal"
                              AlternatingRowBackground="#f9f9f9"
                              SelectionChanged="dgServiceRequests_SelectionChanged">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Request ID" Binding="{Binding IssueID}" Width="100"/>
                            <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*"/>
                            <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="120"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                            <DataGridTextColumn Header="Priority" Binding="{Binding Priority}" Width="80"/>
                            <DataGridTextColumn Header="Date Reported" Binding="{Binding DateReported, StringFormat='{}{0:yyyy-MM-dd}'}" Width="120"/>
                            <DataGridTextColumn Header="Days Open" Binding="{Binding DaysOpen}" Width="80"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Tab 2: Request Details -->
            <TabItem Header="📄 Request Details" FontSize="14" FontWeight="SemiBold">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <TextBlock x:Name="txtRequestDetails" 
                                   FontSize="14" 
                                   TextWrapping="Wrap"
                                   Text="Select a request from the 'All Requests' tab to view details."/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Tab 3: Dependency Graph -->
            <TabItem Header="🔗 Dependencies" FontSize="14" FontWeight="SemiBold">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" 
                               Text="Service Request Dependency Graph"
                               FontSize="16"
                               FontWeight="Bold"
                               Margin="0,0,0,10"/>

                    <TextBox Grid.Row="1" 
                             x:Name="txtDependencyGraph"
                             IsReadOnly="True"
                             TextWrapping="Wrap"
                             VerticalScrollBarVisibility="Auto"
                             FontFamily="Consolas"
                             FontSize="12"
                             Background="#f9f9f9"
                             Padding="10"/>
                </Grid>
            </TabItem>

            <!-- Tab 4: Statistics -->
            <TabItem Header="📊 Statistics" FontSize="14" FontWeight="SemiBold">
                <StackPanel Margin="20">
                    <TextBlock x:Name="txtStatistics" 
                               FontSize="14" 
                               TextWrapping="Wrap"/>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Bottom Action Bar -->
        <Border Grid.Row="3" 
                Background="White" 
                CornerRadius="8" 
                Padding="15" 
                Margin="0,15,0,0"
                BorderBrush="#ddd" 
                BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" 
                           x:Name="txtStatusBar"
                           Text="Ready"
                           VerticalAlignment="Center"
                           FontSize="12"
                           Foreground="#555"/>

                <Button Grid.Column="1"
                        x:Name="btnRefresh"
                        Content="🔄 Refresh"
                        Width="100"
                        Height="35"
                        Background="#27ae60"
                        Foreground="White"
                        FontWeight="Bold"
                        Margin="0,0,10,0"
                        Click="btnRefresh_Click"/>

                <Button Grid.Column="2"
                        x:Name="btnBack"
                        Content="← Back to Menu"
                        Width="150"
                        Height="35"
                        Background="#95a5a6"
                        Foreground="White"
                        FontWeight="Bold"
                        Click="btnBack_Click"/>
            </Grid>
        </Border>
    </Grid>
</Window>