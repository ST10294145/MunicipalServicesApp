<Window x:Class="MunicipalServicesApp.ViewUserRequest"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="My Service Requests" 
        Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        Background="#f0f4f8">

    <Window.Resources>
        <!-- Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="5"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value="0.85"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <DockPanel LastChildFill="True">
        <!-- Header -->
        <Border Background="#2c3e50" DockPanel.Dock="Top" Height="70" Padding="20,0">
            <DockPanel VerticalAlignment="Center">
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                    <TextBlock Text="📋" FontSize="28" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <StackPanel>
                        <TextBlock Text="My Service Requests"
                                   FontSize="22"
                                   FontWeight="Bold"
                                   Foreground="White"/>
                        <TextBlock Text="Track the status of your submitted requests"
                                   FontSize="12"
                                   Foreground="#95a5a6"
                                   Margin="0,2,0,0"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="btnRefresh"
                            Content="🔄 Refresh"
                            Style="{StaticResource ModernButton}"
                            Background="#3498db"
                            Margin="0,0,10,0"
                            Click="btnRefresh_Click"/>
                    <Button x:Name="btnClose"
                            Content="✖ Close"
                            Style="{StaticResource ModernButton}"
                            Background="#95a5a6"
                            Click="btnClose_Click"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Main Content -->
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Stats Summary -->
            <Border Grid.Row="0" 
                    Background="White" 
                    CornerRadius="10" 
                    Padding="20"
                    Margin="0,0,0,20">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <StackPanel Margin="0,0,40,0" HorizontalAlignment="Center">
                        <TextBlock Text="Total Requests" 
                                   FontSize="14" 
                                   Foreground="#7f8c8d"
                                   HorizontalAlignment="Center"/>
                        <TextBlock x:Name="txtTotalCount" 
                                   Text="0" 
                                   FontSize="32" 
                                   FontWeight="Bold"
                                   Foreground="#2c3e50"
                                   HorizontalAlignment="Center"
                                   Margin="0,5,0,0"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,40,0" HorizontalAlignment="Center">
                        <TextBlock Text="Pending" 
                                   FontSize="14" 
                                   Foreground="#7f8c8d"
                                   HorizontalAlignment="Center"/>
                        <TextBlock x:Name="txtPendingCount" 
                                   Text="0" 
                                   FontSize="32" 
                                   FontWeight="Bold"
                                   Foreground="#f39c12"
                                   HorizontalAlignment="Center"
                                   Margin="0,5,0,0"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,40,0" HorizontalAlignment="Center">
                        <TextBlock Text="In Progress" 
                                   FontSize="14" 
                                   Foreground="#7f8c8d"
                                   HorizontalAlignment="Center"/>
                        <TextBlock x:Name="txtInProgressCount" 
                                   Text="0" 
                                   FontSize="32" 
                                   FontWeight="Bold"
                                   Foreground="#3498db"
                                   HorizontalAlignment="Center"
                                   Margin="0,5,0,0"/>
                    </StackPanel>

                    <StackPanel HorizontalAlignment="Center">
                        <TextBlock Text="Completed" 
                                   FontSize="14" 
                                   Foreground="#7f8c8d"
                                   HorizontalAlignment="Center"/>
                        <TextBlock x:Name="txtCompletedCount" 
                                   Text="0" 
                                   FontSize="32" 
                                   FontWeight="Bold"
                                   Foreground="#27ae60"
                                   HorizontalAlignment="Center"
                                   Margin="0,5,0,0"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- DataGrid -->
            <Border Grid.Row="1" 
                    Background="White" 
                    CornerRadius="10" 
                    Padding="10">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Border.Effect>
                <DataGrid x:Name="dgRequests"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          GridLinesVisibility="None"
                          HeadersVisibility="Column"
                          Background="White"
                          BorderThickness="0"
                          RowHeight="40"
                          AlternatingRowBackground="#f9f9f9">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding IssueID}" Width="60"/>
                        <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*" MinWidth="150"/>
                        <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="120"/>
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="110">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Style.Triggers>
                                        <Trigger Property="Text" Value="Pending">
                                            <Setter Property="Foreground" Value="#f39c12"/>
                                        </Trigger>
                                        <Trigger Property="Text" Value="In Progress">
                                            <Setter Property="Foreground" Value="#3498db"/>
                                        </Trigger>
                                        <Trigger Property="Text" Value="Completed">
                                            <Setter Property="Foreground" Value="#27ae60"/>
                                        </Trigger>
                                        <Trigger Property="Text" Value="Cancelled">
                                            <Setter Property="Foreground" Value="#e74c3c"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Priority" Binding="{Binding Priority}" Width="90">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Style.Triggers>
                                        <Trigger Property="Text" Value="Critical">
                                            <Setter Property="Foreground" Value="#e74c3c"/>
                                        </Trigger>
                                        <Trigger Property="Text" Value="High">
                                            <Setter Property="Foreground" Value="#e67e22"/>
                                        </Trigger>
                                        <Trigger Property="Text" Value="Medium">
                                            <Setter Property="Foreground" Value="#f39c12"/>
                                        </Trigger>
                                        <Trigger Property="Text" Value="Low">
                                            <Setter Property="Foreground" Value="#95a5a6"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Date Reported" Binding="{Binding DateReported, StringFormat='{}{0:MM/dd/yyyy}'}" Width="120"/>
                        <DataGridTextColumn Header="Days Open" Binding="{Binding DaysOpen}" Width="90"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>

            <!-- Request Details -->
            <Border Grid.Row="2" 
                    Background="White" 
                    CornerRadius="10" 
                    Padding="20"
                    Margin="0,20,0,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2"/>
                </Border.Effect>
                <StackPanel x:Name="pnlDetails" Visibility="Collapsed">
                    <TextBlock Text="Request Details" 
                               FontSize="18" 
                               FontWeight="Bold"
                               Foreground="#2c3e50"
                               Margin="0,0,0,15"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,20,0">
                            <TextBlock Text="Description:" FontWeight="SemiBold" Foreground="#7f8c8d" Margin="0,0,0,5"/>
                            <TextBlock x:Name="txtDescription" TextWrapping="Wrap" Foreground="#2c3e50"/>

                            <TextBlock Text="Reporter:" FontWeight="SemiBold" Foreground="#7f8c8d" Margin="0,15,0,5"/>
                            <TextBlock x:Name="txtReporter" Foreground="#2c3e50"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Email:" FontWeight="SemiBold" Foreground="#7f8c8d" Margin="0,0,0,5"/>
                            <TextBlock x:Name="txtEmail" Foreground="#2c3e50"/>

                            <TextBlock Text="Street Address:" FontWeight="SemiBold" Foreground="#7f8c8d" Margin="0,15,0,5"/>
                            <TextBlock x:Name="txtStreetAddress" Foreground="#2c3e50"/>

                            <TextBlock Text="SLA Deadline:" FontWeight="SemiBold" Foreground="#7f8c8d" Margin="0,15,0,5"/>
                            <TextBlock x:Name="txtSLADeadline" Foreground="#2c3e50"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>